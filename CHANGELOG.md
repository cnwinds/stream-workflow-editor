# 更新日志

## [0.2.5] - 2025-01-XX

### 新增功能
- ✨ **YAML 多行字符串支持**: 保存 YAML 文件时，多行文本自动使用块标量格式（`|`）保存
  - 支持包含换行符的字符串（如 Python 代码、多行文本）自动使用 `|` 模式
  - 自动处理转义的换行符字符串（`\n`）转换为真正的换行符
  - 确保代码和多行文本以可读的格式保存，而不是压缩成一行
  - 单行字符串不受影响，保持原有格式

### 技术改进
- 🔧 **后端优化**:
  - `file_service.py`: 添加自定义 YAML Dumper，支持多行字符串自动格式化
  - 创建 `MultilineStrDumper` 类，继承自 `yaml.SafeDumper`
  - 实现 `represent_multiline_str` 函数，智能检测和处理多行字符串
  - 支持深层嵌套结构中的多行字符串格式化

## [0.2.3] - 2025-11-20

### 新增功能
- ✨ **子目录支持**: 文件管理功能现在完全支持子目录
  - 递归列出所有子目录中的 YAML 文件
  - 支持在任意深度的子目录中创建、读取、编辑、删除文件
  - 前端界面优化，清晰显示文件路径和目录结构
  - 自动创建不存在的父目录
  - 支持中文目录和文件名

### 修复问题
- 🐛 **修复子目录文件无法打开的问题**: 修复 FastAPI 路由不支持路径参数中斜杠的问题
  - 将所有文件操作 API 路由从 `{filename}` 改为 `{filename:path}`
  - 现在可以正常打开、编辑、删除子目录中的文件

### 技术改进
- 🔧 **后端优化**:
  - `file_service.py`: 使用 `rglob()` 递归搜索文件
  - `files.py`: 所有路由支持路径参数
  - 文件名验证支持子目录路径
- 🎨 **前端优化**:
  - 文件管理界面显示文件夹图标和路径
  - 创建文件时提示支持子目录格式
  - 优化文件名显示样式

### 安全性
- 🔒 禁止路径遍历攻击（`..` 不允许）
- 🔒 只允许正斜杠作为路径分隔符
- 🔒 严格的文件名和目录名验证

## [0.2.2] - 2025-01-12

### 改进
- 📦 **发版流程优化**: 完善了发版流程，确保前端静态文件正确包含在发布包中
  - 更新了 `.gitignore`，允许提交构建后的 `static` 目录
  - 更新了 README.md，添加了详细的发版流程说明
  - 确保从 GitHub 仓库安装时能正常使用前端界面

## [0.2.1] - 2025-01-10

### 修复问题
- 🐛 **模板加载优化**: 修复自定义节点创建时模板文件找不到的问题
  - 添加了模板加载的回退机制，当模板文件不存在时自动使用内置模板
  - 支持从 `stream_workflow_editor.custom_nodes.templates.node_template` 模块导入模板
  - 添加了硬编码的默认模板作为最后的回退选项
  - 解决了在不同项目目录结构下创建自定义节点失败的问题

## [0.2.0] - 2024-12-19

### 新增功能
- ✨ **主题系统**: 新增主题切换功能，支持明亮、护眼、暗色三种主题
  - 在工具栏添加主题选择器
  - 主题选择自动保存到本地存储
  - 所有组件完美适配主题配色
- ✨ **节点ID编辑**: 节点ID现在可以修改
  - 修改节点ID时自动同步更新所有相关连接
  - 支持节点ID格式验证（字母、数字、下划线，不能以数字开头）
  - 支持节点ID唯一性验证
- ✨ **节点说明**: 在节点配置面板下方显示完整的节点说明
  - 自动获取内置节点和自定义节点的描述信息
  - 帮助用户更好地理解和使用节点
- ✨ **内置节点保护**: 内置节点不允许修改接口代码
  - 在连接上下文菜单中，如果目标节点是内置节点，禁用"创建输入参数并连接"选项
  - 防止误操作修改内置节点的接口定义

### 优化改进
- 🎨 **暗色主题优化**: 优化暗色主题下的配色
  - 修复左侧节点面板中节点名字在暗色主题下不可见的问题
  - 修复右侧属性面板配置框在暗色主题下背景色突兀的问题
  - 所有组件统一使用主题变量，确保配色协调
- 🔧 **代码优化**: 
  - 使用 CSS 变量统一管理主题颜色
  - 改进主题切换的平滑过渡效果
  - 优化节点配置面板的布局和样式

### 修复问题
- 🐛 修复节点ID修改后选中状态不同步的问题
- 🐛 修复主题切换时某些组件颜色不更新的问题

## [0.1.0] - 初始版本

### 功能
- 🎨 可视化工作流编辑器
- 📝 YAML 格式支持
- ✅ 配置验证
- 🚀 高性能渲染
- 📦 易于部署

