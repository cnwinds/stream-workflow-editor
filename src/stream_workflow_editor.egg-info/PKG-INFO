Metadata-Version: 2.4
Name: stream-workflow-editor
Version: 0.1.0
Summary: 流式工作流可视化编辑器 - 为 stream-workflow 提供可视化编辑界面
Author: Stream Workflow Team
License: MIT
Project-URL: Homepage, https://github.com/cnwinds/stream-workflow-editor
Project-URL: Documentation, https://github.com/cnwinds/stream-workflow-editor
Project-URL: Repository, https://github.com/cnwinds/stream-workflow-editor
Project-URL: Issues, https://github.com/cnwinds/stream-workflow-editor/issues
Keywords: workflow,visualization,editor,stream-workflow
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastapi>=0.104.1
Requires-Dist: uvicorn[standard]>=0.24.0
Requires-Dist: pydantic>=2.5.0
Requires-Dist: python-multipart>=0.0.6
Requires-Dist: pyyaml>=6.0.1
Requires-Dist: jinja2>=3.1.2
Requires-Dist: click>=8.1.7
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Dynamic: license-file

# 流式工作流可视化编辑器

为 [stream-workflow](https://github.com/cnwinds/stream-workflow) Python 工作流引擎构建的可视化编辑器。

## 特性

- 🎨 **可视化编辑**: 拖拽式节点编辑，直观的工作流设计
- 🔄 **实时预览**: 实时查看工作流配置和验证结果
- 📝 **YAML 支持**: 支持 YAML 格式的导入/导出
- ✅ **配置验证**: 实时验证工作流配置的正确性
- 🚀 **高性能**: 基于 React Flow，支持大量节点的流畅渲染
- 🎯 **类型安全**: 完整的 TypeScript 类型定义
- 📦 **易于部署**: 可通过 pip 安装，一键启动服务

## 安装和使用

### 方式1: 通过 pip 安装（推荐）

```bash
# 安装包
pip install stream-workflow-editor

# 在任何目录启动服务器
cd /path/to/your/project
stream-workflow-server

# 或使用统一命令
stream-workflow server
stream-workflow client  # 启动前端开发服务器
stream-workflow start   # 同时启动前后端
```

安装后，服务器将在 http://localhost:3010 启动，如果前端已构建，可直接访问浏览器使用。

### 方式2: 从源码开发

详见下方的"快速开始"部分。

## 项目结构

```
stream-workflow-editor/
├── src/                         # Python 包源码
│   └── stream_workflow_editor/   # 包根目录（在这里开发后端）
│       ├── api/                  # FastAPI 后端服务
│       │   ├── routes/           # API 路由
│       │   └── services/         # 业务逻辑
│       ├── static/               # 前端静态文件（构建后，自动生成）
│       ├── custom_nodes/         # 自定义节点
│       ├── cli.py                # CLI 入口
│       ├── server.py             # 服务器启动模块
│       └── client.py             # 客户端启动模块
├── frontend/                     # React 前端应用（在这里开发前端）
│   ├── src/                      # React 源码
│   ├── dist/                     # 构建产物（临时，自动生成）
│   └── package.json
└── docs/                         # 项目文档
```

## 快速开始（开发模式）

### 开发环境设置

1. **克隆项目**：
```bash
git clone https://github.com/cnwinds/stream-workflow-editor.git
cd stream-workflow-editor
```

2. **安装 Python 依赖**（在项目根目录）：
```bash
pip install -e .
```

3. **安装前端依赖**：
```bash
cd frontend
npm install
```

### 前端开发

在 `frontend/` 目录进行前端开发：

```bash
cd frontend
npm run dev
```

前端开发服务器将在 http://localhost:3000 启动

### 后端开发

后端源码在 `src/stream_workflow_editor/` 目录，直接在包目录开发。

#### 启动方式

**方式1: 使用 CLI 工具（推荐）**

```bash
# 在项目根目录或任意工作目录

# 生产模式（使用已编译的静态文件，前后端同端口 3010）
stream-workflow start
# 或只启动后端（也会服务静态文件）
stream-workflow server

# 开发模式（前后端分离，前端 3000 端口，后端 3010 端口）
stream-workflow start --force-client

# 仅启动前端开发服务器（需要后端已启动）
stream-workflow client
```

**方式2: 使用命令行参数**

```bash
# 在当前目录启动（自动检测 custom_nodes 目录）
stream-workflow server

# 指定工作目录
stream-workflow server --work-dir /path/to/project

# 直接指定自定义节点目录
stream-workflow server --nodes-dir /path/to/custom/nodes

# 开发模式（自动重载）
stream-workflow server --reload
```

**方式3: 直接运行 Python 模块（开发测试）**

```bash
# 在项目根目录
python -m stream_workflow_editor.api.main
```

后端将在 http://localhost:3010 启动（默认配置）

**端口说明：**
- **生产模式**（已编译静态文件）：前后端都在 `http://localhost:3010`，后端直接提供静态文件
- **开发模式**（前端开发服务器）：前端在 `http://localhost:3000`，后端在 `http://localhost:3010`，前端通过代理访问后端 API

## 打包和发布

### 构建前端并打包

```bash
# 构建前端静态文件
python build_frontend.py

# 构建 Python 包
pip install build
python -m build

# 发布到 PyPI（需要配置 twine）
twine upload dist/*
```

### 本地安装测试

```bash
# 在项目根目录
pip install -e .

# 测试命令
stream-workflow-server --help
stream-workflow --help
```

## 技术栈

### 前端
- React 18 + TypeScript
- React Flow - 工作流画布
- Ant Design - UI 组件库
- Zustand - 状态管理
- Monaco Editor - 代码编辑器
- Vite - 构建工具

### 后端
- FastAPI - Python Web 框架
- Uvicorn - ASGI 服务器
- Click - CLI 工具库

## 功能列表

- [x] 基础框架搭建
- [x] 工作流画布
- [x] 节点管理
- [x] 连接管理
- [x] YAML 集成
- [x] 配置验证
- [ ] 工作流执行
- [ ] 实时预览
- [ ] 性能优化

## 开发计划

详见 `.plan.md` 文件。

## 更多文档

- [开发指南](docs/DEVELOPMENT.md) - 详细的开发流程和目录结构说明
- [架构文档](docs/ARCHITECTURE.md) - 项目架构和技术栈说明
- [使用文档](docs/USAGE.md) - 使用说明和常见问题
- [API 文档](docs/API.md) - API 接口文档
- [日志系统](docs/LOGGING.md) - 日志配置和使用指南

## 许可证

MIT License


