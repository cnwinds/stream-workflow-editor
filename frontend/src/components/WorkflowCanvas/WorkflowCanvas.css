.workflow-canvas {
  width: 100%;
  height: 100%;
}

.react-flow__node {
  font-size: 12px;
}

.react-flow__node.selected {
  /* 移除 outline，使用节点内部的选中样式 */
  outline: none !important;
}

.react-flow__edge.selected {
  stroke: var(--theme-nodeSelected, #1890ff);
}

.react-flow__handle {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: var(--theme-primary, #1890ff);
}

.react-flow__handle-left {
  left: -4px;
}

.react-flow__handle-right {
  right: -4px;
}

/* 连接线标签样式 */
.react-flow__edge-text {
  font-size: 11px;
  fill: var(--theme-textSecondary, #595959);
  font-weight: 500;
}

.react-flow__edge-textbg {
  fill: var(--theme-background, #fff);
  stroke: var(--theme-background, #fff);
  stroke-width: 4px;
}

/* 连接线样式 */
.react-flow__edge-path {
  stroke: var(--theme-borderSecondary, #b1b1b7);
  stroke-width: 2;
}

/* 选中的连线 - 最高优先级，最后渲染 */
.react-flow__edge.selected {
  z-index: 1000 !important;
}

.react-flow__edge.selected .react-flow__edge-path {
  stroke: var(--theme-nodeSelected, #1890ff) !important;
  stroke-width: 3 !important;
  z-index: 1000 !important;
}

/* 鼠标悬停的连线 - 中等优先级 */
.react-flow__edge:hover {
  z-index: 500 !important;
}

.react-flow__edge:hover .react-flow__edge-path {
  stroke: var(--theme-primaryHover, #40a9ff) !important;
  stroke-width: 2.5 !important;
  z-index: 500 !important;
}

/* 无效连接（参数不匹配）的样式 */
.react-flow__edge.invalid .react-flow__edge-path {
  stroke: var(--theme-invalid, #ff4d4f) !important;
  stroke-width: 3;
  stroke-dasharray: 5, 5; /* 虚线表示错误 */
  animation: dash 0.5s linear infinite;
}

@keyframes dash {
  to {
    stroke-dashoffset: -10;
  }
}

/* Minimap 主题样式 */
.enhanced-minimap .react-flow__minimap {
  background-color: var(--theme-backgroundSecondary, #fafafa) !important;
  border: 1px solid var(--theme-border, #e8e8e8) !important;
}

/* Minimap 中的节点颜色 - 增加对比度 */
.enhanced-minimap .react-flow__minimap-node {
  fill: var(--theme-nodeBackground, #fff) !important;
  stroke: var(--theme-nodeBorder, #d9d9d9) !important;
  stroke-width: 1.5 !important;
}

/* Minimap 节点颜色使用主题变量 */
.enhanced-minimap .react-flow__minimap-node {
  fill: var(--theme-minimapNodeFill, #b1b1b7) !important;
  stroke: var(--theme-minimapNodeStroke, #8c8c8c) !important;
  stroke-width: 1.5 !important;
}

/* 明亮主题下增加边框宽度以增加对比度 */
.theme-light .enhanced-minimap .react-flow__minimap-node {
  stroke-width: 2 !important;
}

/* 暗色主题下增加边框宽度 */
.theme-dark .enhanced-minimap .react-flow__minimap-node {
  stroke-width: 2 !important;
}

/* Minimap 连接线颜色使用主题变量 */
.enhanced-minimap .react-flow__minimap-edge {
  stroke: var(--theme-minimapEdgeStroke, #8c8c8c) !important;
  stroke-width: 1.5 !important;
}

/* 明亮主题下增加连接线宽度以增加对比度 */
.theme-light .enhanced-minimap .react-flow__minimap-edge {
  stroke-width: 2 !important;
}

/* 暗色主题下增加连接线宽度 */
.theme-dark .enhanced-minimap .react-flow__minimap-edge {
  stroke-width: 2 !important;
}

/* Minimap 视口框颜色 */
.enhanced-minimap .react-flow__minimap-mask {
  fill: var(--theme-primary, #1890ff) !important;
  fill-opacity: 0.1 !important;
  stroke: var(--theme-primary, #1890ff) !important;
  stroke-width: 3 !important; /* 加粗视口框边框，使其更明显 */
}

/* 明亮主题下进一步加粗视口框 */
.theme-light .enhanced-minimap .react-flow__minimap-mask {
  stroke-width: 3.5 !important;
}

/* 暗色主题下加粗视口框 */
.theme-dark .enhanced-minimap .react-flow__minimap-mask {
  stroke-width: 3.5 !important;
}

/* 护眼主题下加粗视口框 */
.theme-eye-care .enhanced-minimap .react-flow__minimap-mask {
  stroke-width: 3.5 !important;
}

/* Controls 按钮主题样式 */
.react-flow__controls {
  background: var(--theme-backgroundSecondary, #fafafa) !important;
  border: 1px solid var(--theme-border, #e8e8e8) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.react-flow__controls-button {
  background: var(--theme-background, #ffffff) !important;
  border-bottom: 1px solid var(--theme-border, #e8e8e8) !important;
  color: var(--theme-text, #262626) !important;
  fill: var(--theme-text, #262626) !important;
}

.react-flow__controls-button:hover {
  background: var(--theme-backgroundTertiary, #f5f5f5) !important;
  color: var(--theme-primary, #1890ff) !important;
  fill: var(--theme-primary, #1890ff) !important;
}

.react-flow__controls-button:active {
  background: var(--theme-backgroundTertiary, #f5f5f5) !important;
}

.react-flow__controls-button:last-child {
  border-bottom: none !important;
}

/* 暗色主题下的 Controls 按钮 */
.theme-dark .react-flow__controls {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
}

/* 护眼主题下的 Controls 按钮 */
.theme-eye-care .react-flow__controls {
  /* 使用主题变量，无需额外样式 */
}

